<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      data-th-replace="~{layouts/layout :: layout-eni-auction(title=~{:: title},
                                                              content=~{:: main},
                                                              ressourcesSupp=~{})}">

<head>
    <title>Modifier mon profil</title>
</head>

<body>
<main>
    <h2>Modifier mon profil</h2>

    <form action="/profile/update" method="post" data-th-object="${profileForm}" class="userForm">
        <h3>Modifier mes informations</h3>
        <div class="exception" th:if="${errorMessages}">
            <span th:each="msg : ${errorMessages}" th:text="${msg}"></span>
        </div>
        <!-- CSRF Token -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.userName')}" th:errors="*{user.userName}"></div>
            <label for="userName">Username:</label>
            <input id="userName" type="text" th:field="*{user.userName}"/>
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.lastName')}" th:errors="*{user.lastName}"></div>
            <label for="lastName">Last Name:</label>
            <input id="lastName" type="text" th:field="*{user.lastName}">
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.firstName')}" th:errors="*{user.firstName}"></div>
            <label for="firstName">First Name:</label>
            <input id="firstName" type="text" th:field="*{user.firstName}">
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.email')}" th:errors="*{user.email}"></div>
            <label for="email">Email:</label>
            <input id="email" type="text" th:field="*{user.email}" class="form-control"/>
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.phoneNumber')}"
                 th:errors="*{user.phoneNumber}"></div>
            <label for="phoneNumber">Phone:</label>
            <input id="phoneNumber" type="tel" th:field="*{user.phoneNumber}">
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.street')}" th:errors="*{user.street}"></div>
            <label for="street">Street:</label>
            <input id="street" type="text" th:field="*{user.street}">
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.postalCode')}"
                 th:errors="*{user.postalCode}"></div>
            <label for="postalCode">Postal Code:</label>
            <input id="postalCode" type="text" th:field="*{user.postalCode}">
        </div>
        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('user.city')}" th:errors="*{user.city}"></div>
            <label for="city">City:</label>
            <input id="city" type="text" th:field="*{user.city}">
        </div>

        <!--  A remettre si nÃ©cessaire -->
        <h3>Changer de mot de passe</h3>


        <div class="form-group">
            <div class="text-danger exception" th:errors="*{passwordModification.oldPassword}"></div>
            <label for="oldPassword">Previous password:</label>
            <input id="oldPassword" type="password" th:field="*{passwordModification.oldPassword}">
        </div>

        <div class="form-group">
            <div class="text-danger exception" th:if="${#fields.hasErrors('passwordModification.newPassword')}"
                 th:errors="*{passwordModification.newPassword}"></div>
            <label for="newPassword">New password:</label>
            <input type="password" th:field="*{passwordModification.newPassword}">
        </div>

        <div class="form-group">
            <div class="text-danger exception" th:errors="*{passwordModification.confirmPassword}"></div>
            <label for="confirmPassword">Confirm Password:</label>
            <input type="password" th:field="*{passwordModification.confirmPassword}">
        </div>
        <button type="submit">Save</button>
        <button type="button" onclick="window.location.href='/profile/delete'">Delete my account</button>
        <button type="button" onclick="window.location.href='/'">Back</button>

    </form>
</main>
</body>

</html>